work out rating

write rating algorithm

